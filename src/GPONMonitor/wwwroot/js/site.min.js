var OnuDescriptionListSearch=function(){"use strict";var n=$(".onu-list > tbody"),t=$("#search-form"),i=function(){$.event.special.inputchange={setup:function(){var n=this,t;$.data(this,"timer",window.setInterval(function(){t=n.value;$.data(n,"cache")!==t&&($.data(n,"cache",t),$(n).trigger("inputchange"))},1200))},teardown:function(){window.clearInterval($.data(this,"timer"))},add:function(){$.data(this,"cache",this.value)}};t.on("inputchange",function(){var u=$("#search-form").val().toLowerCase();if(u!==""){var r="",t="",i=u.split("_");i.length>=2?(r=i[0],t=i[1]):(r="",t=i[0]);n.find("tr").each(function(){~$(this).find("td.onu-list-id").text().toLowerCase().indexOf(r)&&(~$(this).find("td.onu-list-item").text().toLowerCase().indexOf(t)||~$(this).find("td.onu-list-sn > i").attr("title").toLowerCase().indexOf(t))?$(this).removeClass("hidden"):$(this).addClass("hidden")})}else n.find("tr").each(function(){$(this).removeClass("hidden")})})};return{init:i}}(),TooltipWhenOverflow=function(){"use strict";var n=function(){$(document).on("mouseenter",".onu-list-id, .onu-list-item, .onu-detail-description, .onu-detail-item",function(){var n=$(this);this.offsetWidth<this.scrollWidth&&!n.attr("title")&&n.attr("title",n.text())})};return{init:n}}(),NavbarMediaResize=function(){"use strict";var n=function(){function n(){$("body").css({paddingTop:$("#main-navbar").height()+15})}$(document).on("ready",n);$(window).on("resize",n)};return{init:n}}(),OltDescriptionListService=function(){"use strict";var n=function(n,t,i){$.get("api/Olt/",{oltId:n},"json").success(function(i){t(n,i)}).error(function(t){i(n,t)})};return{getOltDescriptionList:n}}(),OnuDetailsService=function(){"use strict";var n=function(n,t,i,r,u){$.get("api/Onu/",{oltId:n,oltPortId:t,onuId:i},"json").success(function(u){r(n,t,i,u)}).error(function(r){u(n,t,i,r)})};return{getOnuDetails:n}}(),OltDescriptionListController=function(n){"use strict";var i=$(".onu-list > tbody"),t=$("#refresh-onu-list"),r=$("#onu-list-alert"),u=$("#onu-list-alert-description"),s=$("#search-form"),h=function(n){$(n).on("click",".js-get-onu-list",f);$(document).on("click","#refresh-onu-list",f)},c=function(i){t.addClass("gly-spin");n.getOltDescriptionList(i,e,o)},f=function(r){var u=$(r.target).attr("data-olt-id");t.addClass("gly-spin");i.empty();s.val("");n.getOltDescriptionList(u,e,o)},e=function(n,f){var e;r.addClass("hidden");u.empty();i.attr("data-olt-id",n);t.attr("data-olt-id",n);for(e in f){var o=f[e].oltPortId,s=f[e].onuId,c=f[e].onuGponSerialNumber,h;h=f[e].onuDescription!==""?f[e].onuDescription:"("+f[e].onuGponSerialNumber+")";i.append("<tr class='clickable-row' data-olt-port-id='"+o+"' data-onu-id='"+s+"' data-href='#'><td class='onu-list-id'>"+o+"."+s+"<\/td><td class='onu-list-sn'><i class='glyphicon glyphicon-barcode' title='"+c+"'><\/i><\/td><td class='onu-list-item'>"+h+"<\/td><\/tr>")}t.removeClass("gly-spin")},o=function(n,f){r.removeClass("hidden");u.text(f.responseText);i.attr("data-olt-id",n);t.attr("data-olt-id",n);t.removeClass("gly-spin")};return{init:h,initializeOnuList:c}}(OltDescriptionListService),OnuDetailsController=function(n){"use strict";var r=$(".onu-list > tbody"),s=$(".onu-details > tbody"),i=$("#refresh-onu-details"),u=$("#onu-details-alert"),f=$("#onu-details-alert-description"),h=function(){r.on("click","tr.clickable-row",c);$(document).on("click","#refresh-onu-details",l)},c=function(t){var u=$(t.target),f=r.attr("data-olt-id"),s=u.closest("tr").attr("data-olt-port-id"),h=u.closest("tr").attr("data-onu-id");i.addClass("gly-spin");n.getOnuDetails(f,s,h,e,o)},l=function(){var t=i.attr("data-olt-id"),r=i.attr("data-olt-port-id"),u=i.attr("data-onu-id");i.addClass("gly-spin");n.getOnuDetails(t,r,u,e,o)},t=function(n){switch(n){case 0:return"indicator-unknown";case 1:return"indicator-default";case 2:return"indicator-info";case 3:return"indicator-success";case 4:return"indicator-warning";case 5:return"indicator-danger";default:return"indicator-unknown"}},e=function(n,r,e,o){var s,h,c,l,a;u.addClass("hidden");f.empty();$("#onu-olt-port-id-onu-id").text(o.oltPortId+"."+o.oltOnuId);s=o.descriptionName.description!==""?o.descriptionName.description:"("+o.gponSerialNumber.description+")";$("#onu-description").text(s);$("#onu-model-type").text(o.modelType.description);$("#onu-gpon-serial-number").text(o.gponSerialNumber.description);$("#onu-optical-connection-state").text(o.opticalConnectionState.description);$("#onu-optical-connection-state").attr("class","onu-detail-item").addClass(t(o.opticalConnectionState.severity));$("#onu-connection-deactivation-reason").text(o.opticalConnectionDeactivationReason.description);$("#onu-optical-power-received").text(o.opticalPowerReceived.description);$("#onu-optical-power-received").attr("class","onu-detail-item").addClass(t(o.opticalPowerReceived.severity));$("#onu-optical-cable-distance").text(o.opticalCableDistance.description);$("#onu-optical-connection-uptime").text(o.opticalConnectionUptime.description);$("#onu-system-uptime").text(o.systemUptime.description);$("#onu-connection-inactive-time").text(o.opticalConnectionInactiveTime.description);$("#onu-block-status").text(o.blockStatus.description);$("#onu-block-status").attr("class","onu-detail-item").addClass(t(o.blockStatus.severity));$("#onu-block-reason").text(o.blockReason.description);$("#onu-block-reason").attr("class","onu-detail-item").addClass(t(o.blockReason.severity));o.blockStatus.value!=="255"?$("#onu-block-reason").parent("tr").removeClass("hidden"):$("#onu-block-reason").parent("tr").addClass("hidden");$("#onu-gpon-profile").text(o.gponProfile.description);o.hasOwnProperty("ethernetPort1State")&&o.hasOwnProperty("ethernetPort1Speed")?(h=o.ethernetPort1State.value===1?o.ethernetPort1State.description+" - "+o.ethernetPort1Speed.description:o.ethernetPort1State.description,$("#onu-ethernet-port-1-state-and-speed").text(h).parent("tr").removeClass("hidden"),$("#onu-ethernet-port-1-state-and-speed").attr("class","onu-detail-item").addClass(t(o.ethernetPort1State.severity))):($("#onu-ethernet-port-1-state-and-speed").empty().parent("tr").addClass("hidden"),$("#onu-ethernet-port-1-state-and-speed").attr("class","onu-detail-item"));o.hasOwnProperty("ethernetPort2State")&&o.hasOwnProperty("ethernetPort2Speed")?(c=o.ethernetPort2State.value===1?o.ethernetPort2State.description+" - "+o.ethernetPort2Speed.description:o.ethernetPort2State.description,$("#onu-ethernet-port-2-state-and-speed").text(c).parent("tr").removeClass("hidden"),$("#onu-ethernet-port-2-state-and-speed").attr("class","onu-detail-item").addClass(t(o.ethernetPort2State.severity))):($("#onu-ethernet-port-2-state-and-speed").empty().parent("tr").addClass("hidden"),$("#onu-ethernet-port-2-state-and-speed").attr("class","onu-detail-item"));o.hasOwnProperty("ethernetPort3State")&&o.hasOwnProperty("ethernetPort3Speed")?(l=o.ethernetPort3State.value===1?o.ethernetPort3State.description+" - "+o.ethernetPort3Speed.description:o.ethernetPort3State.description,$("#onu-ethernet-port-3-state-and-speed").text(l).parent("tr").removeClass("hidden"),$("#onu-ethernet-port-3-state-and-speed").attr("class","onu-detail-item").addClass(t(o.ethernetPort3State.severity))):($("#onu-ethernet-port-3-state-and-speed").empty().parent("tr").addClass("hidden"),$("#onu-ethernet-port-3-state-and-speed").attr("class","onu-detail-item"));o.hasOwnProperty("ethernetPort4State")&&o.hasOwnProperty("ethernetPort4Speed")?(a=o.ethernetPort4State.value===1?o.ethernetPort4State.description+" - "+o.ethernetPort4Speed.description:o.ethernetPort4State.description,$("#onu-ethernet-port-4-state-and-speed").text(a).parent("tr").removeClass("hidden"),$("#onu-ethernet-port-4-state-and-speed").attr("class","onu-detail-item").addClass(t(o.ethernetPort4State.severity))):($("#onu-ethernet-port-4-state-and-speed").empty().parent("tr").addClass("hidden"),$("#onu-ethernet-port-4-state-and-speed").attr("class","onu-detail-item"));o.hasOwnProperty("voIPLine1State")?($("#onu-voip-port-1-state").text(o.voIPLine1State.description).parent("tr").removeClass("hidden"),$("#onu-voip-port-1-state").attr("class","onu-detail-item").addClass(t(o.voIPLine1State.severity))):($("#onu-voip-port-1-state").empty().parent("tr").addClass("hidden"),$("#onu-voip-port-1-state").attr("class","onu-detail-item"));o.hasOwnProperty("voIPLine2State")?($("#onu-voip-port-2-state").text(o.voIPLine2State.description).parent("tr").removeClass("hidden"),$("#onu-voip-port-2-state").attr("class","onu-detail-item").addClass(t(o.voIPLine2State.severity))):($("#onu-voip-port-2-state").empty().parent("tr").addClass("hidden"),$("#onu-voip-port-2-state").attr("class","onu-detail-item"));o.modelType.description!==""?$("#onu-image").attr("src","images/ONU/"+o.modelType.description+".png").parents().eq(2).removeClass("hidden"):$("#onu-image").parents().eq(2).addClass("hidden");i.attr("data-olt-id",n).attr("data-olt-port-id",r).attr("data-onu-id",e);i.removeClass("gly-spin")},o=function(n,t,r,e){u.removeClass("hidden");f.text(e.responseText);s.find("tr > td.onu-detail-item").empty();$("#onu-image").parents().eq(2).addClass("hidden");i.attr("data-olt-id",n).attr("data-olt-port-id",t).attr("data-onu-id",r);i.removeClass("gly-spin")};return{init:h}}(OnuDetailsService);